(this["webpackJsonpsketch-manager"]=this["webpackJsonpsketch-manager"]||[]).push([[0],{157:function(e,t,n){e.exports=n.p+"static/media/conEdison_logo.5f69d530.png"},171:function(e,t,n){e.exports=n(260)},175:function(e,t,n){},260:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(65),o=n.n(c),i=(n(175),n(53)),l=n(5),u=function(e){var t=localStorage.getItem(e.toString());return t||!1},s=function(e,t){var n=t;"object"==typeof n&&(n=JSON.stringify(n));var a=localStorage.setItem(e,n);return a||!1},d=n(149),f=n(150),m=n(62),h=n.n(m),p="https://sketch-manager-be.herokuapp.com",v=new(function(){function e(){Object(d.a)(this,e),this.init()}return Object(f.a)(e,[{key:"init",value:function(){this.setHeader(),this.setAuthorization()}},{key:"api",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return this.setBaseUrl(e),h.a}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h.a.create(e)}},{key:"setBaseUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;h.a.defaults.baseURL=e}},{key:"setHeader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"application/json";h.a.defaults.headers.post["Content-Type"]=e}},{key:"setAuthorization",value:function(e){e&&(h.a.defaults.headers.common.Authorization="".concat(e))}},{key:"deleteInterceptor",value:function(e){h.a.interceptors.request.eject(e)}}]),e}()),g=r.a.createContext({session:!1,deleteSession:function(){},createSession:function(e){},getSession:function(){},createUserData:function(e){},getUserData:function(){}});var b,E,x=function(e){var t=e.children,n=Object(a.useState)(!1),c=Object(l.a)(n,2),o=c[0],i=c[1];return Object(a.useLayoutEffect)((function(){var e=u("user-session-otr");if(e){i(!0);var t=JSON.parse(e).token;v.setAuthorization(t)}}),[o]),r.a.createElement(g.Provider,{value:{session:o,createSession:function(e){s("user-session-otr",JSON.stringify(e)),i(!0)},deleteSession:function(){var e;e="user-session-otr",localStorage.removeItem(e.toString()),localStorage.getItem(e.toString()),i(!1)},getSession:function(){return u("user-session-otr")},createUserData:function(e){s("user-data-otr",JSON.stringify(e))},getUserData:function(){var e=u("user-data-otr");return e&&(e=JSON.parse(e)),e}}},t)},y=n(164),O=n(58),j=n(285),C=n(286),k=n(55),S=n(151),w=k.c,T=[S.a],R=w(k.a.apply(void 0,T)),M=n(152),L=n(41),F=n(3),D=n(66),P=n(288),B=n(289),I=Object(D.Map)({fetching:!1,error:!1,success:!1,data:{}}),z=Object(P.a)({AUTH_REQUEST:function(){return Object(F.a)(Object(F.a)({},I),{},{fetching:!0})},AUTH_SUCCESS:function(e){return{fetching:!1,success:!0,error:!1,data:e}},AUTH_FAILURE:function(){return{fetching:!1,error:!0}}}),A=z.authRequest,N=z.authSuccess,G=z.authFailure,H=Object(B.a)((b={},Object(L.a)(b,A,(function(e,t){var n=t.payload,a=n.fetching,r=n.success,c=n.error,o=n.data;return e.withMutations((function(e){e.set("fetching",a),e.set("success",r),e.set("error",c),e.set("data",o)}))})),Object(L.a)(b,N,(function(e,t){var n=t.payload,a=n.fetching,r=n.success,c=n.data;return e.withMutations((function(e){e.set("fetching",a),e.set("success",r),e.set("data",c)}))})),Object(L.a)(b,G,(function(e,t){var n=t.payload,a=n.fetching,r=n.error;return e.withMutations((function(e){e.set("fetching",a),e.set("error",r)}))})),b),I),U=Object(D.Map)({fetching:!1,error:!1,success:!1,data:{}}),V=Object(P.a)({VALIDTICKET_REQUEST:function(){return Object(F.a)(Object(F.a)({},U),{},{fetching:!0})},VALIDTICKET_SUCCESS:function(e){return{fetching:!1,success:!0,error:!1,data:e}},VALIDTICKET_FAILURE:function(){return{fetching:!1,error:!0}}}),_=V.validticketRequest,W=V.validticketSuccess,Y=V.validticketFailure,J=Object(B.a)((E={},Object(L.a)(E,_,(function(e,t){var n=t.payload,a=n.fetching,r=n.success,c=n.error,o=n.data;return e.withMutations((function(e){e.set("fetching",a),e.set("success",r),e.set("error",c),e.set("data",o)}))})),Object(L.a)(E,W,(function(e,t){var n=t.payload,a=n.fetching,r=n.success,c=n.data;return e.withMutations((function(e){e.set("fetching",a),e.set("success",r),e.set("data",c)}))})),Object(L.a)(E,Y,(function(e,t){var n=t.payload,a=n.fetching,r=n.error;return e.withMutations((function(e){e.set("fetching",a),e.set("error",r)}))})),E),U),X=Object(M.combineReducers)({auth:H,validTicket:J}),q=Object(k.d)(X,R),$=n(80),K=n(20),Q=n(18),Z=n(19);function ee(){var e=Object(Q.a)(['\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  padding: 0px 30px;\n  min-height: calc(100vh - 200px);\n  \n\n.login__container{\n  font-family: "Muli", sans-serif;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  min-height: calc(100vh - 200px);\n  justify-content: space-around;\n  padding: auto;\n  color: black;\n  min-height: 150px; \n}\n']);return ee=function(){return e},e}function te(){var e=Object(Q.a)(['\n\n  margin: 0;\n  font-family: "Muli", sans-serif;\n  display: flex;\n  flex-direction: column;\n  align-items:center;\n  min-height: 100vh; \na {\n  color: white;\n  cursor: pointer;\n  font-size: 14px;\n  text-decoration: none;\n}\n']);return te=function(){return e},e}var ne=Z.a.div(te()),ae=Z.a.section(ee()),re=n(32),ce=n.n(re),oe=n(50),ie=n(294),le=n(22),ue=n(291),se=n(261);function de(){var e=Object(Q.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  width: calc(100vh - 300px);\n  margin-top:auto;\n  max-width: 400px;\n"]);return de=function(){return e},e}var fe=Z.a.section(de()),me=v.api(),he=new function(e){return{login:function(t,n){return e.post("/sessions/login",{username:t,password:n})}}}(me),pe=new function(e){return{validTicket:function(t){return e.post("/tickets/validTicket",{number:t})}}}(me),ve=function(e,t){var n=t.username,a=t.password;return e(A()),he.login(n,a).then((function(t){var n=t.data;return e(N(n)),n})).catch((function(t){var n=t.message;return e(G()),{access_granted:!1,error:n}}))},ge=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),u=Object(l.a)(o,2),s=u[0],d=u[1],f=Object(a.useState)(!1),m=Object(l.a)(f,2),h=m[0],p=m[1],v=Object(a.useContext)(g).createSession,b=Object(i.b)(),E=Object(i.c)((function(e){return e.get("auth").toObject()})).fetching,x=function(){var e=Object(oe.a)(ce.a.mark((function e(){var t;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve(b,{username:n,password:s});case 2:t=e.sent,Object.prototype.hasOwnProperty.call(t,"error")?(p(!0),c(""),d("")):v(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(fe,null,h&&r.a.createElement(ie.a,{kind:le.a.negative},"Authenticacion Failed"),r.a.createElement(ue.a,{value:n,onChange:function(e){c(e.currentTarget.value),h&&p(!1)},type:"text",placeholder:"User",error:h,overrides:{Root:{style:function(e){e.$theme;return{margin:"10px 0"}}}}}),r.a.createElement(ue.a,{value:s,onChange:function(e){d(e.currentTarget.value),h&&p(!1)},placeholder:"Password",type:"password",error:h,overrides:{Root:{style:function(e){e.$theme;return{marginBottom:"15px"}}}}}),r.a.createElement(se.a,{type:"submit",disabled:""===n||""===s||E,onClick:x,isLoading:E,overrides:{BaseButton:{style:{width:"100%"}}}},"LOGIN"))};function be(){var e=Object(Q.a)(["\n  margin-bottom:30px;\n\n  -webkit-box-shadow: 0 8pt 16pt rgba(0, 0, 0, 0.2);\n  -moz-box-shadow: 0 8pt 16pt rgba(0, 0, 0, 0.2);\n  box-shadow: 0 8pt 16pt rgba(0, 0, 0, 0.2);\n\n"]);return be=function(){return e},e}function Ee(){var e=Object(Q.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  width: calc(100vh - 300px);\n  margin-top:90px;\n"]);return Ee=function(){return e},e}var xe,ye,Oe,je=Z.a.section(Ee()),Ce=Z.a.img(be()),ke=n(157),Se=n.n(ke),we=function(e){var t=e.children;return r.a.createElement(je,null,r.a.createElement(Ce,{src:Se.a,alt:"conEdison logo",width:"180"}),t)},Te=function(){return r.a.createElement(ne,null,r.a.createElement(ae,null,r.a.createElement(we,{children:r.a.createElement(ge,null)})))},Re=function(){return r.a.createElement(K.c,null,r.a.createElement(K.a,{exact:!0,path:"/",component:Te}),r.a.createElement(K.a,{exact:!0,path:"*",component:Te}))},Me=n(296),Le=n(298),Fe=n(279),De=n(71),Pe=n(280);!function(e){e.rect="rect-module",e.text="text-module",e.line="line-module",e.valve="valve-module",e.drip="drip-module",e.reducer="reducer-module",e.union="union-module"}(xe||(xe={})),function(e){e[e.block=16]="block"}(ye||(ye={})),function(e){e.tf="TF",e.ij="IJ",e.simple="SM",e.uni="UNI"}(Oe||(Oe={}));var Be={x:200,y:200,width:450,height:5,value:'500"',data:{},rotation:0,id:"rect-code",name:"guideLine-element"},Ie={x:200,y:200,fontSize:15,text:"",id:"label-code",name:"guideLine-element"},ze={x:200,y:200,radius:8,code:"V#12345",id:"circle-code",name:"guideLine-element",rotation:0},Ae={x:200,y:200,code:'12"',id:"triangle-code",name:"guideLine-element",width:30,height:15,rotation:0},Ne={x:200,y:200,id:"coupling-code",type:Oe.uni,text:"",name:"guideLine-element",rotation:0},Ge=[{label:"Pipe",key:xe.rect,icon:"BsDash"},{label:"Coupling",key:xe.union,icon:"BsCrop"},{label:"Valve",key:xe.valve,icon:"BsCircle"},{label:"Drip",key:xe.drip,icon:"BsCircleFill"},{label:"Reducer",key:xe.reducer,icon:"BsCaretRightFill"},{label:"Label",key:xe.text,icon:"BsTextareaT"}],He=n(56),Ue=r.a.createContext({rectangles:[],reducers:[],valves:[],drips:[],texts:[],couplings:[],addText:function(){},addReact:function(){},addReducers:function(){},addValves:function(){},addDrips:function(){},addCoupling:function(){},updateTexts:function(){},updateValves:function(){},updateReact:function(){},updateDrips:function(){},updateReducers:function(){},updateCouplings:function(){}}),Ve=function(e){var t=e.children,n=r.a.useState([]),a=Object(l.a)(n,2),c=a[0],o=a[1],i=r.a.useState([]),u=Object(l.a)(i,2),s=u[0],d=u[1],f=r.a.useState([]),m=Object(l.a)(f,2),h=m[0],p=m[1],v=r.a.useState([]),g=Object(l.a)(v,2),b=g[0],E=g[1],x=r.a.useState([]),y=Object(l.a)(x,2),O=y[0],j=y[1],C=r.a.useState([]),k=Object(l.a)(C,2),S=k[0],w=k[1],T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"object"===typeof e&&0!==Object.keys(e).length},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;T(e)&&t((function(t){return[].concat(Object(He.a)(t),[e])}))};return r.a.createElement(Ue.Provider,{value:{rectangles:c,couplings:S,texts:s,valves:h,drips:b,reducers:O,addReact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return R(e,o)},addText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return R(e,d)},addValves:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return R(e,p)},addDrips:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return R(e,E)},addReducers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return R(e,j)},updateReact:function(e){return o(e)},updateCouplings:function(e){return w(e)},updateTexts:function(e){return d(e)},updateValves:function(e){return p(e)},updateDrips:function(e){return E(e)},updateReducers:function(e){return j(e)},addCoupling:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return R(e,w)}}},t)},_e=function(){},We=function(e){var t=e.cancell,n=void 0===t?_e:t,r=e.isOpen,c=void 0!==r&&r,o=a.useState(Array(5).fill("")),i=Object(l.a)(o,2),u=i[0],s=i[1],d=a.useContext(Ue),f=d.addValves,m=d.valves;return a.createElement(Le.a,{onClose:n,isOpen:c,unstable_ModalBackdropScroll:!0},a.createElement(Fe.a,null,a.createElement(De.g,null,"Create a Valve")),a.createElement(De.e,null,a.createElement(Me.a,{values:u,onChange:function(e){var t=e.values;s(t)}})),a.createElement(De.f,null,a.createElement(Pe.a,{kind:"tertiary",onClick:n},"Close"),a.createElement(Pe.a,{autoFocus:!0,onClick:function(){var e=Object(F.a)(Object(F.a)({},ze),{},{id:"rect-code-valve-".concat(m.length),code:"V#".concat(u.join(""))});f(e),s(Array(5).fill("")),n()}},"Create")))},Ye=n(6),Je=function(e){return e*(Math.PI/180)},Xe=function(e,t,n){return e+t*n},qe=function(e,t,n){return e-t*n},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0,r=Je(e),c=n+Math.cos(r)*(t/2);return a(c,15,Math.sin(r))},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0,r=Je(e),c=n+Math.sin(r)*(t/2);return a(c,15,Math.cos(r))},Qe=function(e){return Math.round(e/ye.block)*ye.block},Ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=ye.block/2-t;return Math.round(e/n)*n},et=function(e){var t=e.shapeProps,n=e.isSelected,a=e.onSelect,c=e.onChange,o=r.a.useRef(),i=r.a.useRef(),l=r.a.useRef();r.a.useEffect((function(){n&&(i.current.setNode(o.current),i.current.getLayer().batchDraw())}),[n]);var u=function(){!function(e,t,n,a){var r=e.current,c=r.rotation(),o=2*r.radius(),i=$e(c,o,r.x(),n),l=Ke(c,o,r.y(),a);t.current.rotation(r.rotation()),t.current.x(i),t.current.y(l)}(o,l,Xe,qe)},s=2*t.radius,d=$e(t.rotation,s,t.x,Xe),f=Ke(t.rotation,s,t.y,qe);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.Group,null,r.a.createElement(Ye.Text,{text:t.code,fontSize:12,x:d,y:f,ref:l}),r.a.createElement(Ye.Circle,Object.assign({radius:8,stroke:"#2d3436"},t,{ref:o,onContextMenu:a,onClick:a,onTap:a,draggable:!0,onDragEnd:function(){var e=o.current;e.x(Ze(e.x())),e.y(Ze(e.y())),u()},onDragMove:function(){var e=o.current;e.x(Ze(e.x())),e.y(Ze(e.y())),u()},onTransform:u,onTransformEnd:function(e){var n=o.current;n.scaleX(1),n.scaleY(1),u(),c(Object(F.a)(Object(F.a)({},t),{},{x:n.x(),y:n.y(),rotation:n.rotation(),radius:n.radius()}))}}))),n&&r.a.createElement(Ye.Transformer,{ref:i,keepRatio:!0,resizeEnabled:!1}))},tt=We,nt=r.a.memo((function(e){var t=e.selected,n=void 0===t?"":t,a=e.selectValve,c=void 0===a?function(){}:a,o=r.a.useContext(Ue),i=o.updateValves,l=o.valves;return r.a.createElement(r.a.Fragment,null,null===l||void 0===l?void 0:l.map((function(e,t){return r.a.createElement(et,{key:t,shapeProps:e,isSelected:e.id===n,onSelect:function(t){return function(e,t){"click"===e.type||"tap"===e.type?c(t):"contextmenu"===e.type&&(window.addEventListener("contextmenu",(function(e){e.preventDefault()})),alert("Right click"))}(t,e.id)},onChange:function(e){var n=l.slice();n[t]=e,i(n)}})})))})),at=function(){},rt=function(e){var t=e.shapeProps,n=e.isSelected,a=e.onSelect,c=e.onChange,o=r.a.useRef(),i=r.a.useRef(),l=r.a.useRef();r.a.useEffect((function(){n&&(i.current.setNode(o.current),i.current.getLayer().batchDraw())}),[n]);var u=function(){!function(e,t,n,a){var r=e.current,c=r.rotation(),o=2*r.radius(),i=$e(c,o,r.x(),n),l=Ke(c,o,r.y(),a);t.current.rotation(r.rotation()),t.current.x(i),t.current.y(l)}(o,l,Xe,qe)},s=2*t.radius,d=$e(t.rotation,s,t.x,Xe),f=Ke(t.rotation,s,t.y,qe);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.Group,null,r.a.createElement(Ye.Text,{text:t.code,fontSize:12,x:d,y:f,ref:l}),r.a.createElement(Ye.Circle,Object.assign({radius:8,fill:"#4d73be"},t,{ref:o,onContextMenu:a,onClick:a,onTap:a,draggable:!0,onDragEnd:function(){var e=o.current;e.x(Ze(e.x())),e.y(Ze(e.y())),u()},onDragMove:function(){var e=o.current;e.x(Ze(e.x())),e.y(Ze(e.y())),u()},onTransform:u,onTransformEnd:function(e){var n=o.current;n.scaleX(1),n.scaleY(1),u(),c(Object(F.a)(Object(F.a)({},t),{},{x:Ze(n.x()),y:Ze(n.y()),rotation:n.rotation(),radius:n.radius()}))}}))),n&&r.a.createElement(Ye.Transformer,{ref:i,keepRatio:!0,resizeEnabled:!1}))},ct=function(e){var t=e.cancell,n=void 0===t?at:t,r=e.isOpen,c=void 0!==r&&r,o=a.useState(Array(5).fill("")),i=Object(l.a)(o,2),u=i[0],s=i[1],d=a.useContext(Ue),f=d.addDrips,m=d.drips;return a.createElement(Le.a,{onClose:n,isOpen:c,unstable_ModalBackdropScroll:!0},a.createElement(Fe.a,null,a.createElement(De.g,null,"Create a Drip")),a.createElement(De.e,null,a.createElement(Me.a,{values:u,onChange:function(e){var t=e.values;s(t)}})),a.createElement(De.f,null,a.createElement(Pe.a,{kind:"tertiary",onClick:n},"Close"),a.createElement(Pe.a,{autoFocus:!0,onClick:function(){var e=Object(F.a)(Object(F.a)({},ze),{},{id:"rect-code-drip-".concat(m.length),code:"D#".concat(u.join(""))});f(e),s(Array(5).fill("")),n()}},"Create")))},ot=r.a.memo((function(e){var t=e.selected,n=void 0===t?"":t,a=e.selectDrip,c=void 0===a?function(){}:a,o=r.a.useContext(Ue),i=o.updateDrips,l=o.drips;return r.a.createElement(r.a.Fragment,null,null===l||void 0===l?void 0:l.map((function(e,t){return r.a.createElement(rt,{key:t,shapeProps:e,isSelected:e.id===n,onSelect:function(t){return function(e,t){"click"===e.type||"tap"===e.type?c(t):"contextmenu"===e.type&&(window.addEventListener("contextmenu",(function(e){e.preventDefault()})),alert("Right click"))}(t,e.id)},onChange:function(e){var n=l.slice();n[t]=e,i(n)}})})))})),it=function(){},lt=function(e){var t=e.shapeProps,n=e.isSelected,a=e.onSelect,c=e.onChange,o=r.a.useRef(),i=r.a.useRef();return r.a.useEffect((function(){n&&(i.current.setNode(o.current),i.current.getLayer().batchDraw())}),[n]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.Text,Object.assign({onContextMenu:a,onClick:a,onTap:a,ref:o},t,{draggable:!0,onDragEnd:function(e){c(Object(F.a)(Object(F.a)({},t),{},{x:e.target.x(),y:e.target.y()}))},onTransformEnd:function(e){var n=o.current,a=n.scaleX(),r=n.scaleY();n.scaleX(1),n.scaleY(1),c(Object(F.a)(Object(F.a)({},t),{},{x:n.x(),y:n.y(),fontSize:Math.max(n.height()*r),width:Math.max(5,n.width()*a),height:Math.max(n.height()*r)}))}})),n&&r.a.createElement(Ye.Transformer,{ref:i,keepRatio:!0,enabledAnchors:["top-left","top-right","bottom-left","bottom-right"]}))},ut=function(e){var t=e.cancell,n=void 0===t?it:t,r=e.isOpen,c=void 0!==r&&r,o=a.useState(""),i=Object(l.a)(o,2),u=i[0],s=i[1],d=a.useContext(Ue),f=d.addText,m=d.texts;return a.createElement(Le.a,{onClose:n,isOpen:c,unstable_ModalBackdropScroll:!0},a.createElement(Fe.a,null,a.createElement(De.g,null,"Create a Label")),a.createElement(De.e,null,a.createElement(ue.a,{value:u,onChange:function(e){return s(e.target.value)},placeholder:"Label text"})),a.createElement(De.f,null,a.createElement(Pe.a,{kind:"tertiary",onClick:n},"Close"),a.createElement(Pe.a,{autoFocus:!0,onClick:function(){var e=Object(F.a)(Object(F.a)({},Ie),{},{id:"rect-code-text-".concat(m.length),text:u});f(e),s(""),n()},disabled:""===u},"Create")))},st=r.a.memo((function(e){var t=e.selected,n=void 0===t?"":t,a=e.selectText,c=void 0===a?function(){}:a,o=r.a.useContext(Ue),i=o.texts,l=o.updateTexts;return r.a.createElement(r.a.Fragment,null,null===i||void 0===i?void 0:i.map((function(e,t){return r.a.createElement(lt,{key:t,shapeProps:e,isSelected:e.id===n,onSelect:function(t){return function(e,t){"click"===e.type||"tap"===e.type?c(t):"contextmenu"===e.type&&(window.addEventListener("contextmenu",(function(e){e.preventDefault()})),alert("Right click"))}(t,e.id)},onChange:function(e){var n=i.slice();n[t]=e,l(n)}})})))})),dt=n(287),ft=[{label:'2"x1"',id:'2"x1"'},{label:'2"x1-1/4"',id:'2"x1-1/4"'},{label:'4"x2"',id:'4"x2"'},{label:'6"x4"',id:'6"x4"'},{label:'8"x6"',id:'8"x6"'},{label:'12"x8"',id:'12"x8"'},{label:'16"x12"',id:'16"x12"'},{label:'20"x12"',id:'20"x12"'}],mt=function(){},ht=function(e){var t=e.shapeProps,n=e.isSelected,a=e.onSelect,c=e.onChange,o=r.a.useRef(),i=r.a.useRef(),l=r.a.useRef();r.a.useEffect((function(){n&&(i.current.setNode(o.current),i.current.getLayer().batchDraw())}),[n]);var u=function(){!function(e,t,n,a){var r=e.current,c=r.rotation(),o=2*r.width(),i=$e(c,o,r.x(),n),l=Ke(c,o,r.y(),a);t.current.rotation(r.rotation()),t.current.x(i),t.current.y(l)}(o,l,qe,Xe)},s=$e(t.rotation,2*t.width,t.x,qe),d=Ke(t.rotation,2*t.width,t.y,Xe);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.Group,null,r.a.createElement(Ye.Text,{text:t.value,fontSize:12,x:s,y:d,ref:l}),r.a.createElement(Ye.Line,Object.assign({ref:o,onContextMenu:a,onClick:a,onTap:a,draggable:!0,points:[0,30,15,15,30,30],closed:!0,fill:"#2d3436"},t,{onDragEnd:function(){var e=o.current;e.x(Ze(e.x())),e.y(Ze(e.y())),u()},onDragMove:function(){var e=o.current;e.x(Ze(e.x())),e.y(Ze(e.y())),u()},onTransform:u,onTransformEnd:function(e){var n=o.current;n.scaleX(1),n.scaleY(1),u(),c(Object(F.a)(Object(F.a)({},t),{},{x:n.x(),y:n.y(),rotation:n.rotation()}))}}))),n&&r.a.createElement(Ye.Transformer,{ref:i,keepRatio:!0,resizeEnabled:!1}))},pt=function(e){var t=e.cancell,n=void 0===t?mt:t,r=e.isOpen,c=void 0!==r&&r,o=a.useState([]),i=Object(l.a)(o,2),u=i[0],s=i[1],d=a.useContext(Ue),f=d.addReducers,m=d.reducers;return a.createElement(Le.a,{onClose:n,isOpen:c,unstable_ModalBackdropScroll:!0},a.createElement(Fe.a,null,a.createElement(De.g,null,"Create a Reducer")),a.createElement(De.e,null,a.createElement(dt.a,{options:ft,value:u,placeholder:"Select size",onChange:function(e){return s(e.value)}})),a.createElement(De.f,null,a.createElement(Pe.a,{kind:"tertiary",onClick:n},"Close"),a.createElement(Pe.a,{autoFocus:!0,onClick:function(){var e=Object(F.a)(Object(F.a)({},Ae),{},{id:"rect-code-reducer-".concat(m.length),value:"".concat(u[0].label)});f(e),s([]),n()},disabled:0===u.length},"Create")))},vt=r.a.memo((function(e){var t=e.selected,n=void 0===t?"":t,a=e.selectReducer,c=void 0===a?function(){}:a,o=r.a.useContext(Ue),i=o.updateReducers,l=o.reducers;return r.a.createElement(r.a.Fragment,null,null===l||void 0===l?void 0:l.map((function(e,t){return r.a.createElement(ht,{key:t,shapeProps:e,isSelected:e.id===n,onSelect:function(t){return function(e,t){"click"===e.type||"tap"===e.type?c(t):"contextmenu"===e.type&&(window.addEventListener("contextmenu",(function(e){e.preventDefault()})),alert("Right click"))}(t,e.id)},onChange:function(e){var n=l.slice();n[t]=e,i(n)}})})))})),gt=n(299),bt=n(160),Et=n(297),xt=[{label:"PE",id:"PE"},{label:"PT",id:"PT"},{label:"ST",id:"ST"},{label:"ST (C)",id:"ST(C)"},{label:"CI",id:"CI"},{label:"CT",id:"CT"},{label:"WI",id:"WI"}],yt=[{label:"DB",id:"DB"},{label:"INSERT",id:"INSERT"},{label:"HOLEHOG",id:"HOLEHOG"},{label:"PIM",id:"PIM"},{label:"CONSPLIT",id:"CONSPLIT"}],Ot=[{label:"LP",id:"LP"},{label:"MP",id:"MP"},{label:"IP",id:"IP"},{label:"HP",id:"HP"},{label:"TP",id:"TP"}],jt=[{label:'1"',id:"1"},{label:'1-1/4"',id:"1-1/4"},{label:'1-1/2"',id:"1-1/2"},{label:'2"',id:"2"},{label:'3"',id:"3"},{label:'4"',id:"4"},{label:'6"',id:"6"},{label:'8"',id:"8"},{label:'12"',id:"12"},{label:'16"',id:"16"},{label:'20"',id:"20"},{label:'24"',id:"24"}],Ct=n(7),kt=Object(Ct.a)("div",{display:"grid",gridGap:"10px",gridTemplateColumns:"repeat(2, 1fr)",marginBottom:"10px"}),St=function(){},wt=function(e){var t=e.shapeProps,n=e.isSelected,a=e.onSelect,c=e.onChange,o=r.a.useRef(),i=r.a.useRef(),l=r.a.useRef(),u=r.a.useRef();r.a.useEffect((function(){n&&(u.current.setNode(o.current),u.current.getLayer().batchDraw())}),[n]);var s=function(e,t,n,a){var r=e.current,c=r.rotation(),o=r.width(),i=$e(c,o,r.x(),n),l=Ke(c,o,r.y(),a);t.current.rotation(r.rotation()),t.current.x(i),t.current.y(l)},d=function(){s(o,i,Xe,qe),s(o,l,qe,Xe)},f=$e(t.rotation,t.width,t.x,Xe),m=Ke(t.rotation,t.width,t.y,qe),h=$e(t.rotation,t.width,t.x,qe),p=Ke(t.rotation,t.width,t.y,Xe);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.Group,null,r.a.createElement(Ye.Text,{text:"Length: ".concat(t.value),fontSize:12,x:f,y:m,ref:i}),r.a.createElement(Ye.Rect,Object.assign({onContextMenu:a,onClick:a,onTap:a,draggable:!0,ref:o,fill:"#2d3436"},t,{width:Qe(parseInt(t.width,10)),onDragEnd:function(){var e=o.current;e.x(Ze(e.x())),e.y(Ze(e.y(),t.height/2)),d()},onDragMove:function(){var e=o.current;e.x(Ze(e.x())),e.y(Ze(e.y(),t.height/2)),d()},onTransform:d,onTransformEnd:function(e){var n=o.current,a=n.scaleX(),r=n.scaleY();n.scaleX(1),n.scaleY(1),d(),c(Object(F.a)(Object(F.a)({},t),{},{x:n.x(),y:n.y(),rotation:n.rotation(),width:Math.max(5,n.width()*a),height:Math.max(n.height()*r)}))}})),r.a.createElement(Ye.Text,{text:"Cover: ".concat(t.data.cover,'"'),fontSize:12,x:h,y:p,ref:l})),n&&r.a.createElement(Ye.Transformer,{ref:u,rotateAnchorOffset:100,rotationSnaps:[45,90,135,180,225,270,315,360],enabledAnchors:["top-left","top-right","bottom-left","bottom-right"],boundBoxFunc:function(e,t){return t.width<5||t.height<5?e:(t.width=Qe(t.width),t.height=e.height,t)}}))},Tt=function(e){e.accept;var t=e.cancell,n=void 0===t?St:t,r=e.isOpen,c=void 0!==r&&r,o=a.useState([]),i=Object(l.a)(o,2),u=i[0],s=i[1],d=a.useState([]),f=Object(l.a)(d,2),m=f[0],h=f[1],p=a.useState([]),v=Object(l.a)(p,2),g=v[0],b=v[1],E=a.useState([]),x=Object(l.a)(E,2),y=x[0],O=x[1],j=a.useState(""),C=Object(l.a)(j,2),k=C[0],S=C[1],w=a.useState(""),T=Object(l.a)(w,2),R=T[0],M=T[1],L=a.useState([70]),D=Object(l.a)(L,2),P=D[0],B=D[1],I=a.useContext(Ue),z=I.addReact,A=I.rectangles,N=function(e){return{Root:{props:{"data-cy":e}}}};return a.createElement(Le.a,{onClose:n,isOpen:c,unstable_ModalBackdropScroll:!0},a.createElement(Fe.a,null,a.createElement(De.g,null,"Create a Pipe")),a.createElement(De.e,null,a.createElement(kt,null,a.createElement(dt.a,{overrides:N("rmm-select-material"),options:xt,value:u,placeholder:"Select material",onChange:function(e){return s(e.value)}}),a.createElement(dt.a,{overrides:N("rmm-select-method"),options:yt,value:y,placeholder:"Select method",onChange:function(e){return O(e.value)}})),a.createElement(kt,null,a.createElement(dt.a,{overrides:N("rmm-select-size"),options:jt,value:g,placeholder:"Select size",onChange:function(e){return b(e.value)}}),a.createElement(dt.a,{overrides:N("rmm-select-pressure"),options:Ot,value:m,placeholder:"Select pressure",onChange:function(e){return h(e.value)}})),a.createElement(kt,null,a.createElement(ue.a,{required:!0,value:R,onChange:function(e){return M(e.target.value)},overrides:N("rmm-input-year"),placeholder:"Year"}),a.createElement(ue.a,{required:!0,value:k,overrides:N("rmm-input-length"),onChange:function(e){return S(e.target.value)},placeholder:"Length"})),a.createElement(bt.b,null,a.createElement(Et.a,{styleLevel:6,overrides:{Block:{style:{marginBottom:"0px"}}}},"Cover")),a.createElement(gt.a,{value:P,min:10,max:100,onChange:function(e){var t=e.value;return B(t)},overrides:{InnerThumb:function(e){var t=e.$value,n=e.$thumbIndex;return a.createElement(a.Fragment,null,t[n]+'"')},ThumbValue:function(){return null},Thumb:{style:function(){return{height:"36px",width:"36px",display:"flex",alignItems:"center",justifyContent:"center",borderTopLeftRadius:"36px",borderTopRightRadius:"36px",borderBottomRightRadius:"36px",borderBottomLeftRadius:"36px",borderLeftStyle:"solid",borderRightStyle:"solid",borderTopStyle:"solid",borderBottomStyle:"solid",borderLeftWidth:"3px",borderTopWidth:"3px",borderRightWidth:"3px",borderBottomWidth:"3px",borderLeftColor:"#ccc",borderTopColor:"#ccc",borderRightColor:"#ccc",borderBottomColor:"#ccc",backgroundColor:"#fff"}},props:{"data-cy":"rmm-slider-cover"}}}})),a.createElement(De.f,null,a.createElement(Pe.a,{kind:"tertiary",onClick:n},"Close"),a.createElement(Pe.a,{autoFocus:!0,onClick:function(){var e=Object(F.a)(Object(F.a)({},Be),{},{id:"rect-code-pipe-".concat(A.length),value:"".concat(k,"'"),width:parseInt(k,10),data:{material:u[0].label,pressure:m[0].label,size:g[0].label,method:y[0].label,length:k,year:R,cover:P[0]}});z(e),n()},disabled:0===u.length||0===m.length||0===g.length||0===y.length||""===R||0===P.length||""===k},"Create")))},Rt=r.a.memo((function(e){var t=e.selected,n=void 0===t?"":t,a=e.selectRect,c=void 0===a?function(){}:a,o=r.a.useContext(Ue),i=o.updateReact,l=o.rectangles;return r.a.createElement(r.a.Fragment,null,null===l||void 0===l?void 0:l.map((function(e,t){return r.a.createElement(wt,{key:t,shapeProps:e,isSelected:e.id===n,onSelect:function(t){return function(e,t){"click"===e.type||"tap"===e.type?c(t):"contextmenu"===e.type&&(window.addEventListener("contextmenu",(function(e){e.preventDefault()})),alert("Right click"))}(t,e.id)},onChange:function(e){var n=l.slice();n[t]=e,i(n)}})})))})),Mt=n(281),Lt=n(282),Ft=n(283),Dt=function(){},Pt=function(e){var t=e.shapeProps,n=e.isSelected,a=e.onSelect,c=e.onChange,o=r.a.useRef(),i=r.a.useRef();return r.a.useEffect((function(){n&&(i.current.setNode(o.current),i.current.getLayer().batchDraw())}),[n]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.Group,{onContextMenu:a,onClick:a,onTap:a,ref:o,draggable:!0},r.a.createElement(Ye.Line,Object.assign({points:[0,60,0,100],stroke:"#2d3436"},t,{onTransformEnd:function(e){var n=o.current,a=n.scaleY();n.scaleX(1),n.scaleY(1),c(Object(F.a)(Object(F.a)({},t),{},{x:n.x(),y:n.y(),height:Math.max(n.height()*a)}))}})),r.a.createElement(Ye.Text,{text:t.text,fontSize:12,x:t.x-6,y:t.y+110})),n&&r.a.createElement(Ye.Transformer,{ref:i,keepRatio:!0,resizeEnabled:!1}))},Bt=function(e){var t=e.shapeProps,n=e.isSelected,a=e.onSelect,c=e.onChange,o=r.a.useRef(),i=r.a.useRef();r.a.useEffect((function(){n&&(i.current.setNode(o.current),i.current.getLayer().batchDraw())}),[n]);var l=function(){var e=o.current,n=e.scaleY();e.scaleX(1),e.scaleY(1),c(Object(F.a)(Object(F.a)({},t),{},{x:e.x(),y:e.y(),height:Math.max(e.height()*n)}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.Group,{ref:o,onContextMenu:a,onClick:a,onTap:a,draggable:!0},r.a.createElement(Ye.Line,Object.assign({points:[10,50,10,80],stroke:"#2d3436"},t,{onTransformEnd:l})),r.a.createElement(Ye.Line,Object.assign({points:[30,50,30,80],stroke:"#2d3436"},t,{onTransformEnd:l})),r.a.createElement(Ye.Line,Object.assign({points:[5,55,35,55],stroke:"#2d3436"},t,{onTransformEnd:l})),r.a.createElement(Ye.Line,Object.assign({points:[5,75,35,75],stroke:"#2d3436"},t,{onTransformEnd:l}))),n&&r.a.createElement(Ye.Transformer,{ref:i,keepRatio:!0,enabledAnchors:["top-left","top-right","bottom-left","bottom-right"]}))},It=function(e){var t=e.cancell,n=void 0===t?Dt:t,r=e.isOpen,c=void 0!==r&&r,o=a.useState("ji"),i=Object(l.a)(o,2),u=i[0],s=i[1],d=a.useContext(Ue),f=d.addCoupling,m=d.couplings;return a.createElement(Le.a,{onClose:n,isOpen:c,unstable_ModalBackdropScroll:!0},a.createElement(Fe.a,null,a.createElement(De.g,null,"Create a Coupling")),a.createElement(De.e,null,a.createElement(Mt.a,{value:u,onChange:function(e){return s(e.target.value)},name:"coupling",align:Lt.a.horizontal},a.createElement(Ft.a,{value:Oe.tf},"TF"),a.createElement(Ft.a,{value:Oe.ij},"JI"),a.createElement(Ft.a,{value:Oe.uni},"Union"),a.createElement(Ft.a,{value:Oe.simple},"Simple"))),a.createElement(De.f,null,a.createElement(Pe.a,{kind:"tertiary",onClick:n},"Close"),a.createElement(Pe.a,{autoFocus:!0,onClick:function(){var e="simple"===u?"":u,t=Object(F.a)(Object(F.a)({},Ne),{},{id:"rect-code-coypling-".concat(m.length),text:e,type:u});f(t),s(""),n()},disabled:""===u},"Create")))},zt=r.a.memo((function(e){var t=e.selected,n=void 0===t?"":t,a=e.selectCoupling,c=void 0===a?function(){}:a,o=r.a.useContext(Ue),i=o.couplings,l=o.updateCouplings,u=function(e,t){"click"===e.type||"tap"===e.type?c(t):"contextmenu"===e.type&&(window.addEventListener("contextmenu",(function(e){e.preventDefault()})),alert("Right click"))};return r.a.createElement(r.a.Fragment,null,null===i||void 0===i?void 0:i.map((function(e,t){return Oe.uni===e.type?r.a.createElement(Bt,{key:t,shapeProps:e,isSelected:e.id===n,onSelect:function(t){return u(t,e.id)},onChange:function(e){var n=i.slice();n[t]=e,l(n)}}):r.a.createElement(Pt,{key:t,shapeProps:e,isSelected:e.id===n,onSelect:function(t){return u(t,e.id)},onChange:function(e){var n=i.slice();n[t]=e,l(n)}})})))})),At=n(295),Nt=n(44),Gt=a.memo((function(e){var t=e.isOpen,n=void 0!==t&&t,r=e.cancell,c=void 0===r?function(){}:r,o=a.useContext(Ue).rectangles,i=function(){var e=["SIZE"],t=["YEAR"],n=["COVER"],a=["LENGTH"],r=["MATERIAL"],c=["METHOD"],i=["PRESSURE"],l=function(e){var t=new Map;return o.forEach((function(n){var a=e(n,"size"),r=e(n,"material"),c=e(n,"pressure"),o=e(n,"method"),i=e(n,"year"),l="".concat(a,"/").concat(r,"/").concat(c,"/").concat(o,"/").concat(i),u=t.get(l);u?u.push(n):t.set(l,[n])})),t}((function(e,t){return e.data[t]})),u=[];l.forEach((function(e){var t={};e.forEach((function(e){var n,a,r=e.data;t=Object(F.a)(Object(F.a)({},r),{},{length:t.length?(n=t.length,a=r.length,parseInt(n,10)+parseInt(a,10)):parseInt(r.length)})})),u.push(t)}));var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.map((function(e,t){return"SEGMENT ".concat(t+1)})),n=[""].concat(Object(He.a)(t));return n}(u);return u.forEach((function(o){Object.keys(o).forEach((function(l){switch(l){case"size":e.push(o[l]);break;case"year":t.push(o[l]);break;case"cover":n.push(o[l]);break;case"length":a.push("".concat(o[l],"'"));break;case"material":r.push(o[l]);break;case"method":c.push(o[l]);break;case"pressure":i.push(o[l])}}))})),{data:[e,t,n,a,r,c,i],header:s}}(),l=i.data,u=i.header;return a.createElement(Le.a,{onClose:c,closeable:!0,isOpen:n,animate:!0,autoFocus:!0,size:Nt.c.full,role:Nt.b.dialog,unstable_ModalBackdropScroll:!0,overrides:{Root:{style:{zIndex:99}}}},a.createElement(De.g,null,"Report status"),a.createElement(De.e,null,a.createElement(At.a,{columns:u,data:l})))}));var Ht=window.innerHeight,Ut=function(e){var t=e.selectShape,n=e.width,c=e.children,o=e.grid,i=Object(a.useRef)(),u=Object(a.useRef)(),s=r.a.useState([]),d=Object(l.a)(s,2),f=d[0],m=d[1],h=function(e){e.target===e.target.getStage()&&t("")};return r.a.createElement(Ue.Consumer,null,(function(e){return r.a.createElement(Ye.Stage,{ref:i,width:n,height:Ht-40,onMouseDown:h,onTouchStart:h},r.a.createElement(Ue.Provider,{value:e},o,r.a.createElement(Ye.Layer,{ref:u,id:"later-print-report",onDragMove:function(e){u.current.find(".guid-line").destroy();var t=function(e,t,n){var a=[],r=[];e.vertical.forEach((function(e){t.vertical.forEach((function(t){var r=Math.abs(e-t.guide);r<n&&a.push({lineGuide:e,diff:r,snap:t.snap,offset:t.offset})}))})),e.horizontal.forEach((function(e){t.horizontal.forEach((function(t){var a=Math.abs(e-t.guide);a<n&&r.push({lineGuide:e,diff:a,snap:t.snap,offset:t.offset})}))}));var c=[],o=a.sort((function(e,t){return e.diff-t.diff}))[0],i=r.sort((function(e,t){return e.diff-t.diff}))[0];return o&&c.push({lineGuide:o.lineGuide,offset:o.offset,orientation:"V",snap:o.snap}),i&&c.push({lineGuide:i.lineGuide,offset:i.offset,orientation:"H",snap:i.snap}),c}(function(e){var t=[0,n/2,n],a=[0,Ht/2,Ht];return i.current.find(".guideLine-element").forEach((function(n){if(n!==e){var r=n.getClientRect();t.push([r.x,r.x+r.width,r.x+r.width/2]),a.push([r.y,r.y+r.height,r.y+r.height/2])}})),{vertical:t.flat(),horizontal:a.flat()}}(e.target),function(e){var t=e.getClientRect();return{vertical:[{guide:Math.round(t.x),offset:Math.round(e.x()-t.x),snap:"start"},{guide:Math.round(t.x+t.width/2),offset:Math.round(e.x()-t.x-t.width/2),snap:"center"},{guide:Math.round(t.x+t.width),offset:Math.round(e.x()-t.x-t.width),snap:"end"}],horizontal:[{guide:Math.round(t.y),offset:Math.round(e.y()-t.y),snap:"start"},{guide:Math.round(t.y+t.height/2),offset:Math.round(e.y()-t.y-t.height/2),snap:"center"},{guide:Math.round(t.y+t.height),offset:Math.round(e.y()-t.y-t.height),snap:"end"}]}}(e.target),5);t.length&&(!function(e){e.forEach((function(e){if("H"===e.orientation){var t=r.a.createElement(Ye.Line,{key:f.length,points:[-6e3,e.lineGuide,6e3,e.lineGuide],stroke:"rgb(0, 161, 255)",strokeWidth:1,name:"guid-line",dash:[4,6]});m([].concat(Object(He.a)(f),[t])),u.current.clearBeforeDraw()}else if("V"===e.orientation){var n=r.a.createElement(Ye.Line,{key:f.length,points:[e.lineGuide,-6e3,e.lineGuide,6e3],stroke:"rgb(0, 161, 255)",strokeWidth:1,name:"guid-line",dash:[4,6]});m([].concat(Object(He.a)(f),[n])),u.current.clearBeforeDraw()}}))}(t),t.forEach((function(t){switch(t.snap){case"start":case"center":case"end":switch(t.orientation){case"V":e.target.x(t.lineGuide+t.offset);break;case"H":e.target.y(t.lineGuide+t.offset)}}})))},onDragEnd:function(){m([]),u.current.clearBeforeDraw()}},f,c)))}))},Vt=ye.block,_t=window.innerHeight-40,Wt=r.a.memo((function(e){var t=e.width,n=void 0===t?0:t;return r.a.createElement(Ye.Layer,null,function(){for(var e=[],t=0;t<n/Vt;t++)e.push(r.a.createElement(Ye.Line,{key:"".concat(t,"-row"),points:[Math.round(t*Vt)+.5,0,Math.round(t*Vt)+.5,_t],stroke:"#ddd",strokeWidth:1}));return e}(),function(){for(var e=[],t=0;t<_t/Vt;t++)e.push(r.a.createElement(Ye.Line,{key:"".concat(t,"-column"),points:[0,Math.round(t*Vt),n,Math.round(t*Vt)],stroke:"#ddd",strokeWidth:.5}));return e}())})),Yt=n(284),Jt=n(13),Xt=n(290),qt=n(165),$t=n(36);function Kt(){var e=Object(Q.a)(["\n    margin-top:3px;\n    color:",";\n"]);return Kt=function(){return e},e}function Qt(){var e=Object(Q.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    height: 70px;\n    width:80px;\n    padding:5px;\n    :hover{\n        background-color:#0793D0\n    }\n"]);return Qt=function(){return e},e}var Zt=Z.a.div(Qt()),en=Z.a.label(Kt(),(function(e){return e.theme.colors.white})),tn={BsDash:function(e){return r.a.createElement($t.e,e)},BsSquare:function(e){return r.a.createElement($t.h,e)},BsCircle:function(e){return r.a.createElement($t.b,e)},BsCircleFill:function(e){return r.a.createElement($t.c,e)},BsCaretRightFill:function(e){return r.a.createElement($t.a,e)},BsCrop:function(e){return r.a.createElement($t.d,e)},BsTextareaT:function(e){return r.a.createElement($t.i,e)}},nn=function(e){var t=Object(Ct.b)(),n=Object(l.a)(t,2),a=(n[0],n[1]),c=e.item,o=c.label,i=c.icon,u=c.key,s=e.onClick,d=Object(qt.a)(e,["item","onClick"]),f=tn[i];return r.a.createElement(Zt,Object.assign({},d,{theme:a,onClick:function(){return s(u)},"data-cy":"option-side-bar"}),r.a.createElement(f,{color:a.colors.white}),r.a.createElement(en,{theme:a},o))},an=function(){},rn=function(e){var t=e.options,n=void 0===t?[]:t,a=e.onClick,c=void 0===a?an:a,o=e.height,i=void 0===o?window.innerHeight:o,l=i/2-40-240;return console.log(l,i),r.a.createElement(Xt.a,{items:n,overrides:{List:{style:function(e){e.$theme;return{outline:"none",backgroundColor:"#0581C1",height:"480px",maxHeight:"480px",position:"absolute",zIndex:1,top:"".concat(l,"px")}}},Option:{component:nn,props:{onClick:c}}},renderAll:!0})},cn=n(292);function on(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var ln=function(){var e=Object(a.useState)(on()),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){function e(){r(on())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n},un=n(161),sn=n.n(un),dn=n(162),fn=n.n(dn),mn=function(){var e=Object(oe.a)(ce.a.mark((function e(t){var n,a,r;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sn()(t);case 2:n=e.sent,a=n.toDataURL("image/png"),(r=new fn.a).addImage(a,"JPEG",20,20,200,200),r.save("download.pdf");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function hn(){var e=Object(Q.a)(["\n    height:40px;\n    min-width:400px;\n    display: flex;\n    align-items:center;\n    Justify-content:flex-start;\n    padding-left: 15px;\n    \n"]);return hn=function(){return e},e}function pn(){var e=Object(Q.a)(["\n    height:40px; \n    background-Color:#FFF; \n    position: relative;\n    display: flex;\n    flex-flow: row;\n    justify-content: flex-end;\n"]);return pn=function(){return e},e}function vn(){var e=Object(Q.a)(["\n    height:40px; \n    width:100%; \n    background-Color:#FFF; \n    position: relative;\n    display: flex;\n    flex-flow: row;\n    justify-content: Space-Between;\n    box-shadow: rgba(0, 0, 0, 0.16) 0px 4px 16px;\n"]);return vn=function(){return e},e}function gn(){var e=Object(Q.a)(["\n    display: flex;\n    position:relative;\n    flex-flow: row;\n    background-color: #F9F9F9;\n"]);return gn=function(){return e},e}function bn(){var e=Object(Q.a)(["\n    display: flex;\n    flex-flow: column;\n    background-color: #F9F9F9;\n"]);return bn=function(){return e},e}var En=Z.a.div(bn()),xn=Z.a.div(gn()),yn=Z.a.div(vn()),On=Z.a.div(pn()),jn=Z.a.label(hn());function Cn(){var e=Object(Q.a)(['\n    font-weight: 500;\n    font-family: system-ui, "Helvetica Neue", Helvetica, Arial, sans-serif;\n    font-size: 16px;\n    display: inline-flex;\n']);return Cn=function(){return e},e}var kn,Sn=Z.a.label(Cn()),wn=r.a.createElement(Sn,null,"".concat((kn={firstName:"Sebastian",lastName:"Cruz",ticketNumber:"XG19000590"}).firstName," ").concat(kn.lastName," - ").concat(kn.ticketNumber)),Tn=function(){return wn},Rn=function(){var e=ln(),t=e.width,n=e.height,a=r.a.useState(""),c=Object(l.a)(a,2),o=c[0],i=c[1],u=r.a.useState(""),s=Object(l.a)(u,2),d=s[0],f=s[1],m=r.a.useState(!1),h=Object(l.a)(m,2),p=h[0],v=h[1],g=r.a.useState(!1),b=Object(l.a)(g,2),E=b[0],x=b[1],y=function(){var e=Object(oe.a)(ce.a.mark((function e(){var t;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E){e.next=2;break}return e.abrupt("return");case 2:return x(!0),t=document.querySelector(".konvajs-content canvas:last-child"),e.next=6,mn(t);case 6:x(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){return i("")};return r.a.createElement(Ve,null,r.a.createElement(En,null,r.a.createElement(yn,null,r.a.createElement(jn,null,r.a.createElement(Tn,null)),r.a.createElement(On,null,r.a.createElement(cn.a,{content:r.a.createElement("p",null,"Delete selected element"),accessibilityType:"tooltip"},r.a.createElement(se.a,{kind:Jt.a.tertiary,shape:Jt.b.square,overrides:{Root:{style:{marginRight:"15px"}}},disabled:""===d},r.a.createElement($t.g,null))),r.a.createElement(cn.a,{content:r.a.createElement("p",null,"\xbfAre you done? Save it as PDF for approval"),accessibilityType:"tooltip"},r.a.createElement(se.a,{kind:Jt.a.tertiary,shape:Jt.b.square,disabled:E,overrides:{Root:{style:{marginRight:"5px"}}},endEnhancer:function(){return r.a.createElement($t.f,null)},onClick:function(){return y()}},E?"Generating...":"Generate PDF")),r.a.createElement(cn.a,{content:r.a.createElement("p",null,"Check the status of the report"),accessibilityType:"tooltip"},r.a.createElement(se.a,{kind:Jt.a.tertiary,endEnhancer:function(){return r.a.createElement(Yt.a,{size:24})},onClick:function(){return v(!0)}},"Open Report")))),r.a.createElement(xn,null,r.a.createElement(rn,{height:n,onClick:function(e){return i(e)},options:Ge}),r.a.createElement(Ut,{selectShape:f,width:t,grid:r.a.createElement(Wt,{width:t})},r.a.createElement(Rt,{selected:d,selectRect:f}),r.a.createElement(st,{selected:d,selectText:f}),r.a.createElement(nt,{selected:d,selectValve:f}),r.a.createElement(ot,{selected:d,selectDrip:f}),r.a.createElement(vt,{selected:d,selectReducer:f}),r.a.createElement(zt,{selected:d,selectCoupling:f})))),r.a.createElement(Tt,{isOpen:o===xe.rect,cancell:O}),r.a.createElement(tt,{isOpen:o===xe.valve,cancell:O}),r.a.createElement(ut,{isOpen:o===xe.text,cancell:O}),r.a.createElement(ct,{isOpen:o===xe.drip,cancell:O}),r.a.createElement(pt,{isOpen:o===xe.reducer,cancell:O}),r.a.createElement(It,{isOpen:o===xe.union,cancell:O}),r.a.createElement(Gt,{isOpen:p,cancell:function(){return v(!1)}}))};function Mn(){var e=Object(Q.a)(["\n    width: 100%;\n    height: 100vh;\n"]);return Mn=function(){return e},e}var Ln=Z.a.div(Mn()),Fn=function(){return r.a.createElement(Ln,null,r.a.createElement(Rn,null))},Dn=function(e,t){var n=t.number;return e(_()),pe.validTicket(n).then((function(t){var n=t.data;return e(W(n)),n})).catch((function(t){var n=t.message;return e(Y()),{access_granted:!1,error:n}}))};function Pn(){var e=Object(Q.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  width: calc(100vh - 300px);\n  margin-top:auto;\n  max-width: 300px;\n"]);return Pn=function(){return e},e}var Bn=Z.a.section(Pn()),In=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),u=Object(l.a)(o,2),s=u[0],d=u[1],f=Object(a.useState)(""),m=Object(l.a)(f,2),h=m[0],p=m[1],v=Object(a.useState)(!1),g=Object(l.a)(v,2),b=g[0],E=g[1],x=Object(K.f)(),y=Object(i.b)(),O=Object(i.c)((function(e){return e.get("validTicket").toObject()})).fetching,j=function(){var e=Object(oe.a)(ce.a.mark((function e(){var t;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dn(y,{number:n});case 2:t=e.sent,console.log("ticketData",t),Object.prototype.hasOwnProperty.call(t,"error")?(p(t.error),d(!0),E(!0),C()):x.push("/Sketch");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){c("")};return r.a.createElement(Bn,null,s&&r.a.createElement(Le.a,{onClose:function(){return E(!1)},isOpen:b},r.a.createElement(Fe.a,null,r.a.createElement(De.g,null,"Oops! Something happened to your search")),r.a.createElement(De.e,null,h),r.a.createElement(De.f,null,r.a.createElement(Pe.a,{kind:"tertiary",onClick:function(){return E(!1)}},"Cancel"),r.a.createElement(Pe.a,{autoFocus:!0,onClick:function(){E(!1),x.push("/Sketch")}},"Confirm"))),r.a.createElement(ue.a,{value:n,onChange:function(e){return c(e.currentTarget.value)},placeholder:"Ticket Number",overrides:{Root:{style:function(e){e.$theme;return{marginBottom:"10px"}}}}}),r.a.createElement(se.a,{type:"submit",disabled:""===n||O,onClick:j,isLoading:O,overrides:{BaseButton:{style:{width:"100%"}}}},"NEXT"))};function zn(){var e=Object(Q.a)(['\nmargin-bottom:15px;\nfont-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\nmax-width: 300px;\nfont-size: 15px;\ncolor: black;\nletter-spacing:0.5px;\nfont-weight: 500;\n']);return zn=function(){return e},e}function An(){var e=Object(Q.a)(["\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  flex-direction: column;\n  padding: 50px 30px;\n  min-height: calc(100vh - 200px);\n\n.ticket__container{\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  justify-content: space-around;\n  padding: auto;\n  color: black;\n  min-height: 150px;\n  max-width: 300px;\n  \n}"]);return An=function(){return e},e}var Nn=Z.a.section(An()),Gn=Z.a.h5(zn()),Hn=function(){return r.a.createElement(Nn,null,r.a.createElement(we,null,r.a.createElement(Gn,null,"Please introduce your job ticket number"),r.a.createElement(In,null)))},Un=function(){return r.a.createElement(K.c,null,r.a.createElement(K.a,{exact:!0,path:"/",component:Hn}),r.a.createElement(K.a,{exact:!0,path:"/Sketch",component:Fn}))},Vn=function(){var e=Object(a.useContext)(g).session;return r.a.createElement($.a,null,e?r.a.createElement(Un,null):r.a.createElement(Re,null))},_n={accent:"#0581C1",accent50:"#E0F3FA",accent100:"#C1E6F5",accent200:"#069BD7",accent300:"#0471A9",accent400:"#046191",accent500:"#035179",accent600:"#034161",accent700:"#023048"},Wn={colors:{buttonPrimaryFill:_n.accent,buttonPrimaryText:"#FFF",buttonPrimaryHover:_n.accent200,buttonPrimaryActive:_n.accent300,buttonPrimarySelectedFill:_n.accent200,buttonPrimarySelectedText:"#FFF",buttonPrimarySpinnerForeground:_n.accent700,buttonPrimarySpinnerBackground:_n.accent300}},Yn=Object(j.a)(_n,Wn),Jn=new y.a;var Xn=function(){return r.a.createElement(i.a,{store:q},r.a.createElement(x,null,r.a.createElement(O.a,{value:Jn},r.a.createElement(C.a,{theme:Yn},r.a.createElement(Vn,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Xn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[171,1,2]]]);
//# sourceMappingURL=main.ba962526.chunk.js.map